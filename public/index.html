<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>FountainJS</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/png" href="http://fountainjs.io/assets/imgs/fountain.png" />
</head>
<body>
<!--[if lt IE 10]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
  your browser</a> to improve your experience.
</p>
<![endif]-->

<div id="root"></div>

<script>
  window.AudioContext = window.AudioContext || window.webkitAudioContext;
  audioContext = new AudioContext();
  sampleRate = audioContext.sampleRate;
  console.log("sample rate:" + sampleRate);

  lowpassFilter = audioContext.createBiquadFilter();
  lowpassFilter.type = 0;
  lowpassFilter.frequency.value = 20000;

  analyser = audioContext.createAnalyser();
  analyser.fftSize = 1024;
  analyser.smoothingTimeContant = 0.9;

  navigator.getUserMedia({video: false, audio: true}, function (stream) {
    var input = audioContext.createMediaStreamSource(stream);

    input.connect(lowpassFilter);
    lowpassFilter.connect(analyser);
    visualStart();
  }, function () {

  });
</script>
</body>
</html>
